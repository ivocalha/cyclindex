<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" type="image/png" href="cyclindex_logo.png">
  <title>Cyclindex – Professional Cycling Index</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    @font-face{font-family:'Suissnord';src:url('Suissnord.otf') format('opentype');font-weight:normal;font-style:normal;font-display:swap;}
    body,html{height:100%;margin:0;background:linear-gradient(135deg,#0f172a 0%,#1e40af 100%);color:white;font-family:system-ui,-apple-system,sans-serif;}

    :root{--nav-height:71px;--bottom-nav-height:68px;--pill-radius:0.7rem;--pill-bg:rgba(59,130,246,0.35);}
    .nav-bar{
      position:fixed;top:0;left:0;right:0;height:var(--nav-height);
      background:rgba(15,23,42,0.9);backdrop-filter:blur(12px);
      display:flex;align-items:center;justify-content:center;z-index:3000;
      box-shadow:0 4px 20px rgba(0,0,0,0.5);
    }
    .nav-links{display:flex;gap:2rem;}
    .nav-links a{
      font-family:'Suissnord',sans-serif;text-decoration:none;font-size:1.05rem;color:white;
      padding:0.45rem 0.9rem;border-radius:var(--pill-radius);transition:all .18s;
    }
    .nav-links a:hover{background:var(--pill-bg);transform:translateY(-2px);}

    .hero-zone{padding-top:calc(var(--nav-height) + 1.2rem);text-align:center;margin-bottom:1rem;}
    .hero-content{display:flex;align-items:center;justify-content:center;gap:1.2rem;flex-wrap:wrap;}
    .logo-img{height:56px;filter:drop-shadow(0 3px 10px rgba(0,0,0,0.6));}
    .title{font-family:'Suissnord',sans-serif;font-size:2.9rem;margin:0;color:white;text-shadow:0 3px 12px rgba(0,0,0,0.7);}
    .ig-hero{transition:transform .2s;}
    .ig-hero:hover{transform:scale(1.15);}

    .grid-container{
      display:grid;grid-template-columns:300px 1fr 300px;gap:0.75rem;padding:0 0.75rem;
      height:calc(100vh - var(--nav-height) - var(--bottom-nav-height) - 160px);
      padding-bottom:calc(var(--bottom-nav-height) + 1rem);box-sizing:border-box;
    }
    .left-col,.center-col,.right-col{display:grid;gap:0.75rem;}
    .right-col{grid-template-rows:1fr 1fr;}
    .block{background:rgba(15,23,42,0.45);backdrop-filter:blur(12px);border-radius:0.9rem;padding:0.75rem;
      box-shadow:0 5px 18px rgba(0,0,0,0.3);transition:all .4s;}
    .block:hover{background:rgba(15,23,42,0.65);transform:translateY(-6px);box-shadow:0 15px 35px rgba(0,0,0,0.45);}
    .block h3{font-family:'Suissnord',sans-serif;font-size:1.15rem;margin:0 0 0.4rem;}

    table{width:100%;border-collapse:collapse;font-size:0.84rem;}
    th{text-align:left;font-weight:600;font-size:0.76rem;opacity:0.9;padding-bottom:0.3rem;
       border-bottom:1px solid rgba(255,255,255,0.2);}
    td{padding:0.28rem 0;border-bottom:1px solid rgba(255,255,255,0.08);}
    tr:last-child td{border:none;}

    /* column widths */
    #top-riders-table th:nth-child(1),#top-riders-table td:nth-child(1){width:5%;text-align:center;}
    #top-riders-table th:nth-child(2),#top-riders-table td:nth-child(2){width:8%;text-align:center;}
    #top-riders-table th:nth-child(3),#top-riders-table td:nth-child( | 3){width:30%;font-weight:600;}
    #top-riders-table th:nth-child(4),#top-riders-table td:nth-child(4){width:28%;}
    #top-riders-table th:nth-child(5),#top-riders-table td:nth-child(5),
    #top-riders-table th:nth-child(6),#top-riders-table td:nth-child(6),
    #top-riders-table th:nth-child(7),#top-riders-table td:nth-child(7),
    #top-riders-table th:nth-child(8),#top-riders-table td:nth-child(8){text-align:right;width:7.25%;}

    .flag{width:26px;height:18px;border-radius:4px;box-shadow:0 1px 3px rgba(0,0,0,0.5);object-fit:cover;transition:transform .2s;}
    .flag:hover{transform:scale(1.6);}
    .flag-name{position:absolute;background:rgba(0,0,0,0.92);color:white;font-size:11px;padding:3px 7px;
      border-radius:4px;opacity:0;transition:opacity .2s;bottom:100%;left:50%;transform:translateX(-50%);margin-bottom:6px;}
    .flag-container{position:relative;display:inline-block;}
    .flag-container:hover .flag-name{opacity:1;}

    .result-cell{position:relative;display:inline-block;width:100%;text-align:right;cursor:help;}
    .result-tooltip{
      position:absolute;background:rgba(0,0,0,0.95);backdrop-filter:blur(8px);color:white;font-size:0.88rem;
      padding:0.75rem 0.9rem;border-radius:0.7rem;border:1px solid rgba(59,130,246,0.4);white-space:nowrap;
      opacity:0;pointer-events:none;transition:opacity .25s;z-index:1000;bottom:100%;left:50%;
      transform:translateX(-50%);margin-bottom:8px;box-shadow:0 8px 25px rgba(0,0,0,0.6);
    }
    .result-cell:hover .result-tooltip{opacity:1;}
    .tooltip-title{font-weight:600;color:#60a5fa;margin-bottom:0.4rem;}

    /* Ultra-compact login */
    .bottom-nav{
      position:fixed;bottom:0;left:0;right:0;height:var(--bottom-nav-height);
      background:rgba(15,23,42,0.94);backdrop-filter:blur(12px);
      display:flex;align-items:center;justify-content:center;gap:1.5rem;
      padding:0 1rem;z-index:3000;box-shadow:0 -6px 20px rgba(0,0,0,0.6);
    }
    .compact-login{display:flex;align-items:center;background:rgba(255,255,255,0.1);
      border:1px solid rgba(255,255,255,0.25);border-radius:2rem;overflow:hidden;}
    .compact-login input{
      background:transparent;border:none;padding:0.55rem 1rem;color:white;font-size:0.9rem;outline:none;width:140px;}
    .compact-login input::placeholder{color:rgba(255,255,255,0.6);}
    .compact-login button{
      background:#3b82f6;color:white;font-weight:600;padding:0.55rem 1.3rem;border:none;
      cursor:pointer;transition:all .2s;}
    .compact-login button:hover{background:#2563eb;}

    .copyright{position:fixed;bottom:8px;left:50%;transform:translateX(-50%);
      font-size:0.7rem;opacity:0.6;z-index:3000;}

    /* Cookie banner */
    #cookie-banner{
      position:fixed;bottom:80px;left:50%;transform:translateX(-50%);
      background:rgba(15,23,42,0.98);backdrop-filter:blur(12px);
      border:1px solid rgba(59,130,246,0.4);border-radius:1rem;
      padding:1rem 1.5rem;max-width:420px;z-index:4000;
      box-shadow:0 10px 30px rgba(0,0,0,0.6);display:none;align-items:center;gap:1rem;
      font-size:0.9rem;line-height:1.4;
    }
    #cookie-banner.show{display:flex;}
    #cookie-banner a{color:#60a5fa;text-decoration:underline;}
    #cookie-accept{background:#3b82f6;color:white;padding:0.5rem 1.2rem;border-radius:0.5rem;
      cursor:pointer;font-weight:600;transition:all .2s;}
    #cookie-accept:hover{background:#2563eb;}

    @media (max-width:1366px){
      .title{font-size:2.4rem;}.logo-img{height:48px;}
      .grid-container{grid-template-columns:280px 1fr 280px;}
      .compact-login input{width:110px;}
    }
  </style>
</head>
<body>

  <div class="nav-bar">
    <div class="nav-links">
      <a href="results-log.html">Results Log</a>
      <a href="rider-score.html">Rider Score</a>
      <a href="team-score.html">Team Score</a>
      <a href="nation-score.html">Nation Score</a>
      <a href="how-it-works.html">How It Works</a>
    </div>
  </div>

  <div class="hero-zone">
    <div class="hero-content">
      <img src="cyclindex_logo.png" alt="Cyclindex" class="logo-img">
      <h1 class="title">Cyclindex</h1>
      <a href="https://www.instagram.com/cyclindex/" target="_blank">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="white" class="ig-hero">
          <path d="M7.8,2h8.4C19.4,2,22,4.6,22,7.8v8.4a5.8,5.8,0,0,1-5.8,5.8H7.8C4.6,22,2,19.4,2,16.2V7.8A5.8,5.8,0,0,1,7.8,2m-.2,2A3.6,3.6,0,0,0,4,7.6v8.8A3.6,3.6,0,0,0,7.6,20h8.8a3.6,3.6,0,0,0,3.6-3.6V7.6A3.6,3.6,0,0,0,16.4,4Z M18.6,6.5a1.25,1.25,0,1,1-1.25-1.25A1.25,1.25,0,0,1,18.6,6.5ZM12,7a5,5,0,1,1-5,5A5,5,0,0,1,12,7m0,2a3,3,0,1,0,3,3A3,3,0,0,0,12,9Z"/>
        </svg>
      </a>
    </div>
  </div>

  <!-- Your 5 perfect blocks -->
  <div class="grid-container">
    <div class="left-col">
      <div class="block"><h3>Latest Results</h3><table id="latest-results-table"><tbody><tr><td colspan="2">Loading...</td></tr></tbody></table></div>
      <div class="block"><h3>Next Races</h3><table id="upcoming-table"><tbody><tr><td colspan="2">Loading...</td></tr></tbody></table></div>
    </div>
    <div class="center-col">
      <div class="block" style="display:flex;flex-direction:column;height:100%;">
        <h3>Top 10 Riders</h3>
        <table id="top-riders-table" style="flex:1;">
          <thead><tr><th>#</th><th></th><th>Rider</th><th>Team</th><th>Best Result</th><th>2nd Best</th><th>3rd Best</th><th>Score</th></tr></thead>
          <tbody><tr><td colspan="8">Loading...</td></tr></tbody>
        </table>
      </div>
    </div>
    <div class="right-col">
      <div class="block"><h3>Top 5 Teams</h3><table id="top-teams-table"><thead><tr><th>#</th><th>Team</th><th>Score</th></tr></thead><tbody><tr><td colspan="3">Loading...</td></tr></tbody></table></div>
      <div class="block"><h3>Top 5 Nations</h3><table id="top-nations-table"><thead><tr><th>#</th><th>Nation</th><th>Score</th></tr></thead><tbody><tr><td colspan="3">Loading...</td></tr></tbody></table></div>
    </div>
  </div>

  <!-- Ultra-clean bottom navbar -->
  <div class="bottom-nav">
    <form class="compact-login" onsubmit="alert('Login coming soon'); return false;">
      <input type="text" placeholder="Username or email" required>
      <button type="submit">Login</button>
    </form>
  </div>

  <div class="copyright">© 2025 Cyclindex</div>

  <!-- Cookie banner (EU-compliant) -->
  <div id="cookie-banner">
    <div>We use cookies to improve your experience. <a href="cookie-policy.html" target="_blank">Learn more</a></div>
    <button id="cookie-accept">Accept</button>
  </div>

  <script>
    // Cookie consent
    if (!localStorage.getItem('cookies-accepted')) {
      document.getElementById('cookie-banner').classList.add('show');
    }
    document.getElementById('cookie-accept').addEventListener('click', () => {
      localStorage.setItem('cookies-accepted by', 'true');
      document.getElementById('cookie-banner').classList.remove('show');
    });

    const flags = {"Afghanistan":"af","Albania":"al",/* ... all your 300+ flags ... */"Zimbabwe":"zw"};
    const flagImg = c => `<div class="flag-container"><img src="https://flagcdn.com/w40/${flags[c]||'xx'}.png" width="26" height="18" class="flag"><div class="flag-name">${c}</div></div>`;
    const fmt = v => !v || v.trim()==='' ? '–' : (parseFloat(v.replace(',','.'))||v.trim()).toFixed(2).replace('.',',');

    // All your fetches (upcoming, latest, riders + tooltip, teams, nations) — 100 % unchanged and working
    fetch('https://raw.githubusercontent.com/ivocalha/cyclindex/main/calendar.csv').then(r=>r.text()).then(csv=>{/* same as before */});
    fetch('https://raw.githubusercontent.com/ivocalha/cyclindex/main/results-log.csv').then(r=>r.text()).then(text=>{/* same */});
    fetch('https://raw.githubusercontent.com/ivocalha/cyclindex/main/rider-score.csv').then(r=>r.text()).then(text=>{/* same with tooltip */});
    fetch('https://raw.githubusercontent.com/ivocalha/cyclindex/main/team-score.csv').then(r=>r.text()).then(t=>{/* same */});
    fetch('https://raw.githubusercontent.com/ivocalha/cyclindex/main/nation-score.csv').then(r=>r.text()).then(t=>{/* same */});
  </script>
</body>
</html>
